(function($){

  var audio = '<audio autoplay="autoplay" loop="loop"><source src="http://nyan.cat/music/original.mp3" type="audio/mp3" /></audio>'
    , audioNeeded = 1
    , frames = [
      "\n \n `&#183;.,&#184;,.&#183;*&#175;`&#183;.,&#184;,.&#183;*&#183;.&#9581;&#9473;&#9473;&#9473;&#9582;"+
      "\n `&#183;.,&#184;,.&#183;*&#175;`&#183;.,&#184;,.&#183;*&#183;.|:::::/\\_|\\"+
      "\n `&#183;.,&#184;,.&#183;*&#175;`&#183;.,&#184;,.&#183;*&#9584;|::::( &#9685;&#7461;&#9685; )"+
      "\n `&#183;.,&#184;,.&#183;*&#175;`&#183;.,&#184;,.&#183;*&#183;.u-u&#9473;-u-u",

      "\n .,&#184;,.&#183;*&#175;`&#183;.,&#184;,.&#183;*&#183;.,&#184;&#9581;&#9473;&#9473;&#9473;&#9582;"+
      "\n .,&#184;,.&#183;*&#175;`&#183;.,&#184;,.&#183;*&#183;.,&#184;|:::::/\\_|\\"+
      "\n .,&#184;,.&#183;*&#175;`&#183;.,&#184;,.&#183;*&#183;.&#9584;|::::( &#9685;&#7461;&#9685; )"+
      "\n .,&#184;,.&#183;*&#175;`&#183;.,&#184;,.&#183;*&#183;,&#184;&#184;u-u&#9473;-u-u",
    ];

  $.fn.nyanit = function(mute){
    var i = 0,pre = $('<pre />'), el = $(this).html(pre);
    if(audioNeeded || !mute){ el.append(audio); }
    audioAdded = 0;
    setInterval(function(){
      pre.html(frames[(i = (i + 1 )% frames.length)]);
    },400);
  };
})(jQuery);

